<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Business Validator Pro - Validate Your Startup Ideas</title>
    <meta name="description" content="Professional AI-powered business idea validation tool. Get comprehensive market analysis, financial projections, and expert recommendations.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .glass-effect {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 8px;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .dark {
            background-color: #111827;
            color: #f9fafb;
        }
        
        .dark input, .dark textarea {
            background-color: #374151;
            color: #f9fafb;
            border-color: #4b5563;
        }
        
        .dark .bg-white {
            background-color: #1f2937;
        }
        
        .dark .bg-gray-50 {
            background-color: #111827;
        }
        
        .dark .text-gray-600 {
            color: #d1d5db;
        }
        
        .dark .text-gray-700 {
            color: #e5e7eb;
        }
        
        .dark .border-gray-300 {
            border-color: #4b5563;
        }
    </style>
</head>
<body class="bg-gray-50 transition-colors duration-300">
    <!-- Navigation -->
    <nav class="glass-effect sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <i class="fas fa-rocket text-2xl text-indigo-600 mr-2"></i>
                    <span class="font-bold text-xl">AI Business Validator Pro</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="themeToggle" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                    <button id="historyBtn" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i class="fas fa-history"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="gradient-bg py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-6">
                Validate Your Business Idea<br>
                <span class="text-yellow-300">With AI Precision</span>
            </h1>
            <p class="text-xl text-gray-200 mb-8 max-w-3xl mx-auto">
                Get comprehensive market analysis, financial projections, and expert recommendations 
                for your startup idea in seconds.
            </p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- API Key Setup -->
        <div id="apiKeySetup" class="bg-white rounded-xl shadow-lg p-6 mb-8 fade-in">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-key text-indigo-600 mr-2"></i>
                API Configuration
            </h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Google AI Studio API Key</label>
                    <div class="flex space-x-2">
                        <input type="password" id="apiKey" placeholder="Enter your Gemini API key" 
                               class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <button onclick="saveApiKey()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Save Key
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-1">
                        <a href="https://makersuite.google.com/app/apikey" target="_blank" class="text-indigo-600 hover:underline">
                            Get your free API key here →
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Business Idea Input -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 fade-in">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                Your Business Idea
            </h2>
            <textarea id="businessIdea" rows="6" 
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                placeholder="Describe your business idea in detail. Include your target market, product/service, and any unique value propositions..."></textarea>
            <button onclick="validateBusiness()" 
                class="mt-4 w-full py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                id="validateBtn">
                <i class="fas fa-magic mr-2"></i>
                Validate Business Idea
            </button>
        </div>

        <!-- Loading Spinner -->
        <div id="loading" class="text-center py-12 hidden">
            <div class="loading-spinner mx-auto mb-4"></div>
            <p class="text-gray-600">Analyzing your business idea...</p>
        </div>

        <!-- Results Section -->
        <div id="results" class="space-y-6 hidden"></div>

        <!-- History Section -->
        <div id="historyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-96 overflow-y-auto">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">Validation History</h3>
                            <button onclick="closeHistory()" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div id="historyList" class="space-y-2"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-gray-900 py-8 mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-gray-600 dark:text-gray-400">
                Built by Swami Gadila | 
                <a href="https://github.com/swamy18/ai-business-validator" class="text-indigo-600 hover:underline">
                    GitHub Repository
                </a>
            </p>
        </div>
    </footer>

    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        // Global variables
        let currentAnalysis = null;
        
        // Theme management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
            }
        }

        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
            const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
        }

        // API Key management
        function saveApiKey() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (apiKey) {
                localStorage.setItem('gemini_api_key', apiKey);
                document.getElementById('apiKeySetup').style.display = 'none';
                showNotification('API Key saved successfully!', 'success');
            }
        }

        function loadApiKey() {
            const savedKey = localStorage.getItem('gemini_api_key');
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
                document.getElementById('apiKeySetup').style.display = 'none';
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 p-4 rounded-lg text-white z-50 fade-in ${
                type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500'
            }`;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 5000);
        }

        // Main validation function
        async function validateBusiness() {
            const apiKey = localStorage.getItem('gemini_api_key');
            const businessIdea = document.getElementById('businessIdea').value.trim();
            
            if (!apiKey) {
                showNotification('Please configure your API key first!', 'error');
                document.getElementById('apiKeySetup').style.display = 'block';
                return;
            }
            
            if (!businessIdea) {
                showNotification('Please describe your business idea!', 'error');
                return;
            }

            // Show loading
            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('validateBtn').disabled = true;
            document.getElementById('results').classList.add('hidden');

            try {
                const analysis = await callGeminiAPI(businessIdea, apiKey);
                displayResults(analysis);
                saveToHistory(businessIdea, analysis);
            } catch (error) {
                console.error('Validation error:', error);
                showNotification('Failed to analyze business idea. Please try again.', 'error');
            } finally {
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('validateBtn').disabled = false;
            }
        }

        // Gemini API integration
        async function callGeminiAPI(businessIdea, apiKey) {
            const prompt = `You are an Expert Business Consultant & Market Analysis System. When given a business idea, provide comprehensive analysis with:

🎯 BUSINESS CONCEPT SUMMARY
📊 MARKET ANALYSIS (with visual progress bars using ▓ symbols)
🏆 COMPETITIVE LANDSCAPE (list 3 direct competitors)
💰 FINANCIAL PROJECTIONS (3-year forecast)
⚠️ RISK ASSESSMENT (high/medium risks with mitigation)
🚀 GO-TO-MARKET STRATEGY (3 phases)
📈 SUCCESS PROBABILITY MATRIX (scored /50)
✅ VALIDATION CHECKLIST
🎯 FINAL RECOMMENDATION (Green/Yellow/Red light)
📋 INVESTOR PITCH SUMMARY

Business Idea: ${businessIdea}

Make it professional, specific, and actionable. Include realistic numbers and competitor examples.`;

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }],
                    generationConfig: {
                        temperature: 0.7,
                        topK: 40,
                        topP: 0.95,
                        maxOutputTokens: 2048,
                    }
                })
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status}`);
            }

            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        // Display results
        function displayResults(analysis) {
            currentAnalysis = analysis;
            const resultsDiv = document.getElementById('results');
            
            // Parse and format the analysis
            const sections = analysis.split('\n\n').filter(section => section.trim());
            let html = '';
            
            sections.forEach(section => {
                if (section.includes('🎯') || section.includes('📊') || section.includes('🏆') || 
                    section.includes('💰') || section.includes('⚠️') || section.includes('🚀') || 
                    section.includes('📈') || section.includes('✅') || section.includes('🎯') || 
                    section.includes('📋')) {
                    
                    const icon = section.charAt(0);
                    const title = section.split('\n')[0];
                    const content = section.substring(title.length).trim();
                    
                    html += `
                        <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                            <h3 class="text-xl font-bold mb-4 flex items-center">
                                <span class="text-2xl mr-2">${icon}</span>
                                ${title.replace(icon, '').trim()}
                            </h3>
                            <div class="prose max-w-none">
                                ${formatContent(content)}
                            </div>
                        </div>
                    `;
                }
            });

            resultsDiv.innerHTML = html + `
                <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                    <div class="flex flex-wrap gap-4">
                        <button onclick="copyResults()" class="flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-copy mr-2"></i>Copy Results
                        </button>
                        <button onclick="downloadPDF()" class="flex-1 py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                            <i class="fas fa-download mr-2"></i>Download PDF
                        </button>
                        <button onclick="shareResults()" class="flex-1 py-2 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                            <i class="fas fa-share mr-2"></i>Share
                        </button>
                    </div>
                </div>
            `;
            
            resultsDiv.classList.remove('hidden');
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Format content with proper styling
        function formatContent(content) {
            let formatted = content
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/^- (.+)$/gm, '<li class="ml-4">$1</li>')
                .replace(/(\d+\/\d+)/g, '<span class="font-bold text-indigo-600">$1</span>')
                .replace(/(Green|Yellow|Red) light/g, '<span class="font-bold px-2 py-1 rounded $1 === "Green" ? "bg-green-100 text-green-800" : $1 === "Yellow" ? "bg-yellow-100 text-yellow-800" : "bg-red-100 text-red-800">$1 LIGHT</span>');
            
            if (content.includes('▓')) {
                formatted = formatted.replace(/▓/g, '<span class="text-indigo-600">▓</span>');
            }
            
            return formatted;
        }

        // Copy results to clipboard
        function copyResults() {
            if (currentAnalysis) {
                navigator.clipboard.writeText(currentAnalysis).then(() => {
                    showNotification('Results copied to clipboard!', 'success');
                });
            }
        }

        // Download PDF
        function downloadPDF() {
            if (!currentAnalysis) return;
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(16);
            doc.text('AI Business Validation Report', 20, 20);
            doc.setFontSize(12);
            
            const lines = doc.splitTextToSize(currentAnalysis, 170);
            doc.text(lines, 20, 40);
            
            doc.save('business-validation-report.pdf');
            showNotification('PDF downloaded successfully!', 'success');
        }

        // Share functionality
        function shareResults() {
            if (navigator.share) {
                navigator.share({
                    title: 'AI Business Validation Report',
                    text: 'Check out this comprehensive business analysis!',
                    url: window.location.href
                });
            } else {
                copyResults();
            }
        }

        // History management
        function saveToHistory(idea, analysis) {
            const history = JSON.parse(localStorage.getItem('validation_history') || '[]');
            history.unshift({
                idea: idea.substring(0, 50) + '...',
                analysis: analysis,
                timestamp: new Date().toLocaleString()
            });
            
            if (history.length > 10) history.pop();
            localStorage.setItem('validation_history', JSON.stringify(history));
        }

        function showHistory() {
            const history = JSON.parse(localStorage.getItem('validation_history') || '[]');
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p class="text-gray-500">No validation history yet.</p>';
            } else {
                historyList.innerHTML = history.map(item => `
                    <div class="border-b pb-2">
                        <p class="font-semibold">${item.idea}</p>
                        <p class="text-sm text-gray-600">${item.timestamp}</p>
                        <button onclick="loadHistoryItem('${history.indexOf(item)}')" 
                                class="text-sm text-indigo-600 hover:underline">Load this analysis</button>
                    </div>
                `).join('');
            }
            
            document.getElementById('historyModal').classList.remove('hidden');
        }

        function loadHistoryItem(index) {
            const history = JSON.parse(localStorage.getItem('validation_history') || '[]');
            currentAnalysis = history[index].analysis;
            displayResults(currentAnalysis);
            closeHistory();
        }

        function closeHistory() {
            document.getElementById('historyModal').classList.add('hidden');
        }

        // Event listeners
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        document.getElementById('historyBtn').addEventListener('click', showHistory);

        // Initialize
        initTheme();
        loadApiKey();
    </script>
</body>
</html>
